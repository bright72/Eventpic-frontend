{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\phasi\\\\Documents\\\\GitHub\\\\Requesting-permission-to-use-photos-system-PDPA-\\\\front-end\\\\src\\\\AddEvent.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Form, Button, Container, Row, Col } from 'react-bootstrap';\nimport Nevbar from './Nevbar.js';\nimport './Style.css';\nimport List from './List';\nimport firebase, { database } from './firebase/indexstore';\nimport { withRouter } from 'react-router-dom';\nimport auth from './firebase/index';\nimport Login from './LoginForm.js';\nconst {\n  Group,\n  Label,\n  Control\n} = Form;\n\nclass AddEvent extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const {\n        name,\n        start_date,\n        end_date,\n        start_time,\n        end_time,\n        detail,\n        event_id,\n        dateline\n      } = this.state;\n\n      if (name && start_date && end_date && start_time && end_time && detail == '') {\n        // return this.updateItem();\n        alert(\"กรุณากรอกรายละเอียดให้ครบถ้วน :)\");\n      } else if (event_id != '') {\n        if (start_date > end_date || start_date > dateline || end_date > dateline) {\n          alert(\"กรุณากรอกวันที่ให้ถูกต้อง\");\n        }\n\n        return this.updateItem();\n      } else if (start_date > end_date || start_date > dateline || end_date > dateline) {\n        alert(\"กรุณากรอกวันที่ให้ถูกต้อง\");\n      } else {\n        const itemsRef = firebase.database().ref('events');\n        const item = {\n          name,\n          detail,\n          start_date,\n          end_date,\n          start_time,\n          end_time,\n          dateline\n        };\n        itemsRef.push(item);\n        this.setState({\n          event_id: '',\n          name: '',\n          detail: '',\n          start_date: '',\n          end_date: '',\n          start_time: '',\n          end_time: '',\n          dateline: ''\n        });\n        this.props.history.push('/ListofEvent');\n      }\n    };\n\n    this.state = {\n      events: [],\n      event_id: '',\n      name: '',\n      detail: '',\n      start_date: '',\n      end_date: '',\n      start_time: '',\n      end_time: '',\n      dateline: '',\n      imagelink: '',\n      currentUser: null\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const itemsRef = firebase.database().ref('events');\n    itemsRef.on('value', snapshot => {\n      let events = snapshot.val();\n      let newState = [];\n\n      for (let item in events) {\n        newState.push({\n          event_id: item,\n          name: events[item].name,\n          detail: events[item].detail,\n          start_date: events[item].start_date,\n          end_date: events[item].end_date,\n          start_time: events[item].start_time,\n          end_time: events[item].end_time,\n          dateline: events[item].dateline\n        });\n      }\n\n      auth.onAuthStateChanged(user => {\n        if (user) {\n          this.setState({\n            currentUser: user\n          });\n        }\n      });\n      this.setState({\n        events: newState\n      });\n    });\n  }\n\n  render() {\n    const {\n      currentUser\n    } = this.state;\n\n    if (currentUser) {\n      return /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Nevbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        className: \" m-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xs: 12,\n        sm: {\n          span: 10\n        },\n        md: {\n          span: 4,\n          offset: 2\n        },\n        lg: {\n          span: 6,\n          offset: 3\n        },\n        className: \"p-5 Loginbox\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"text-center mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 29\n        }\n      }, \" Add Event\"), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        className: \"mt-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 33\n        }\n      }, \"Name of Event\"), /*#__PURE__*/React.createElement(Group, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Control, {\n        name: \"name\",\n        value: this.state.name,\n        onChange: this.handleChange,\n        type: \"text\",\n        placeholder: \"Name of Event\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        controlId: \"exampleForm.ControlTextarea1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 37\n        }\n      }, \"Detail of event\"), /*#__PURE__*/React.createElement(Form.Control, {\n        required: true,\n        name: \"detail\",\n        value: this.state.detail,\n        onChange: this.handleChange,\n        type: \"text\",\n        placeholder: \"Detail of event\",\n        as: \"textarea\",\n        rows: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 45\n        }\n      }, \"Start date of Event\"), /*#__PURE__*/React.createElement(Control, {\n        required: true,\n        name: \"start_date\",\n        value: this.state.start_date,\n        onChange: this.handleChange,\n        type: \"date\",\n        placeholder: \"Date of Event\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 45\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 45\n        }\n      }, \"End date of Event\"), /*#__PURE__*/React.createElement(Control, {\n        required: true,\n        name: \"end_date\",\n        value: this.state.end_date,\n        onChange: this.handleChange,\n        type: \"date\",\n        placeholder: \"Date of Event\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 45\n        }\n      })))), /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 45\n        }\n      }, \"Start time of Event\"), /*#__PURE__*/React.createElement(Control, {\n        required: true,\n        name: \"start_time\",\n        value: this.state.start_time,\n        onChange: this.handleChange,\n        type: \"time\",\n        placeholder: \"Date of Event\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 45\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 45\n        }\n      }, \"End time of Event\"), /*#__PURE__*/React.createElement(Control, {\n        required: true,\n        name: \"end_time\",\n        value: this.state.end_time,\n        onChange: this.handleChange,\n        type: \"time\",\n        placeholder: \"Date of Event\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 45\n        }\n      })))), /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 33\n        }\n      }, \"Dateline\"), /*#__PURE__*/React.createElement(Group, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Control, {\n        required: true,\n        name: \"dateline\",\n        value: this.state.dateline,\n        onChange: this.handleChange,\n        type: \"date\",\n        placeholder: \"Dateline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Link, {\n        to: \"/ListofEvent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"dark\",\n        block: true,\n        className: \" mt-4 btn-custom\",\n        onClick: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 37\n        }\n      }, \"Submit Event\"))))));\n    }\n\n    if (!currentUser) {\n      return /*#__PURE__*/React.createElement(Login, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 17\n        }\n      });\n    }\n  }\n\n}\n\nexport default withRouter(AddEvent);","map":{"version":3,"sources":["C:/Users/phasi/Documents/GitHub/Requesting-permission-to-use-photos-system-PDPA-/front-end/src/AddEvent.js"],"names":["React","Component","Link","Form","Button","Container","Row","Col","Nevbar","List","firebase","database","withRouter","auth","Login","Group","Label","Control","AddEvent","constructor","handleChange","e","name","value","target","setState","handleSubmit","preventDefault","start_date","end_date","start_time","end_time","detail","event_id","dateline","state","alert","updateItem","itemsRef","ref","item","push","props","history","events","imagelink","currentUser","bind","componentDidMount","on","snapshot","val","newState","onAuthStateChanged","user","render","span","offset"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Form, Button, Container, Row, Col } from 'react-bootstrap'\r\nimport Nevbar from './Nevbar.js'\r\nimport './Style.css'\r\nimport List from './List';\r\nimport firebase, { database } from './firebase/indexstore'\r\nimport { withRouter } from 'react-router-dom'\r\nimport auth from './firebase/index'\r\nimport Login from './LoginForm.js'\r\n\r\nconst { Group, Label, Control } = Form\r\n\r\nclass AddEvent extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            events: [],\r\n            event_id: '',\r\n            name: '',\r\n            detail: '',\r\n            start_date: '',\r\n            end_date: '',\r\n            start_time: '',\r\n            end_time: '',\r\n            dateline: '',\r\n            imagelink: '',\r\n            currentUser: null\r\n        }\r\n\r\n        this.handleChange = this.handleChange.bind(this)\r\n        this.handleSubmit = this.handleSubmit.bind(this)\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        const itemsRef = firebase.database().ref('events');\r\n        itemsRef.on('value', (snapshot) => {\r\n            let events = snapshot.val();\r\n            let newState = [];\r\n            for (let item in events) {\r\n                newState.push({\r\n                    event_id: item,\r\n                    name: events[item].name,\r\n                    detail: events[item].detail,\r\n                    start_date: events[item].start_date,\r\n                    end_date: events[item].end_date,\r\n                    start_time: events[item].start_time,\r\n                    end_time: events[item].end_time,\r\n                    dateline: events[item].dateline\r\n                })\r\n            }\r\n            auth.onAuthStateChanged(user => {\r\n                if (user) {\r\n                    this.setState({\r\n                        currentUser: user\r\n                    })\r\n                }\r\n            })\r\n            this.setState({\r\n                events: newState\r\n            })\r\n        })\r\n    }\r\n\r\n    handleChange = e => {\r\n        const { name, value } = e.target\r\n        this.setState({\r\n            [name]: value\r\n        })\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const { name, start_date, end_date, start_time, end_time, detail, event_id, dateline } = this.state\r\n        if (name && start_date && end_date && start_time && end_time && detail == '') {\r\n            // return this.updateItem();\r\n            alert(\"กรุณากรอกรายละเอียดให้ครบถ้วน :)\")\r\n        } else if (event_id != '') {\r\n            if (start_date > end_date || start_date > dateline || end_date > dateline) {\r\n                alert(\"กรุณากรอกวันที่ให้ถูกต้อง\")\r\n            }\r\n            return this.updateItem();\r\n        } else if (start_date > end_date || start_date > dateline || end_date > dateline) {\r\n            alert(\"กรุณากรอกวันที่ให้ถูกต้อง\")\r\n        } else {\r\n            const itemsRef = firebase.database().ref('events')\r\n            const item = {\r\n                name,\r\n                detail,\r\n                start_date,\r\n                end_date,\r\n                start_time,\r\n                end_time,\r\n                dateline\r\n            }\r\n            itemsRef.push(item)\r\n            this.setState({\r\n                event_id: '',\r\n                name: '',\r\n                detail: '',\r\n                start_date: '',\r\n                end_date: '',\r\n                start_time: '',\r\n                end_time: '',\r\n                dateline: ''\r\n            })\r\n\r\n            this.props.history.push('/ListofEvent');\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        const {currentUser} = this.state\r\n        if (currentUser) {\r\n            return (\r\n                <Container fluid >\r\n                    <Nevbar />\r\n                    <Row className=\" m-4\">\r\n                        <Col\r\n                            xs={12}\r\n                            sm={{ span: 10 }}\r\n                            md={{ span: 4, offset: 2 }}\r\n                            lg={{ span: 6, offset: 3 }}\r\n                            className=\"p-5 Loginbox\"\r\n                        >\r\n                            <h1 className=\"text-center mt-2\"> Add Event</h1>\r\n                            <Form onSubmit={this.handleSubmit} className=\"mt-4\">\r\n                                <Label>Name of Event</Label>\r\n                                <Group >\r\n                                    <Control name=\"name\" value={this.state.name} onChange={this.handleChange} type=\"text\" placeholder=\"Name of Event\" />\r\n                                </Group>\r\n                                <Form.Group controlId=\"exampleForm.ControlTextarea1\">\r\n                                    <Form.Label>Detail of event</Form.Label>\r\n                                    <Form.Control required name=\"detail\" value={this.state.detail} onChange={this.handleChange} type=\"text\" placeholder=\"Detail of event\" as=\"textarea\" rows=\"3\" />\r\n                                </Form.Group>\r\n                                <Form>\r\n                                    <Form.Row>\r\n                                        <Col>\r\n                                            <Label>Start date of Event</Label>\r\n                                            <Control required name=\"start_date\" value={this.state.start_date} onChange={this.handleChange} type=\"date\" placeholder=\"Date of Event\" />\r\n                                        </Col>\r\n                                        <Col>\r\n                                            <Label>End date of Event</Label>\r\n                                            <Control required name=\"end_date\" value={this.state.end_date} onChange={this.handleChange} type=\"date\" placeholder=\"Date of Event\" />\r\n                                        </Col>\r\n                                    </Form.Row>\r\n                                </Form>\r\n                                <Form>\r\n                                    <Form.Row>\r\n                                        <Col>\r\n                                            <Label>Start time of Event</Label>\r\n                                            <Control required name=\"start_time\" value={this.state.start_time} onChange={this.handleChange} type=\"time\" placeholder=\"Date of Event\" />\r\n                                        </Col>\r\n                                        <Col>\r\n                                            <Label>End time of Event</Label>\r\n                                            <Control required name=\"end_time\" value={this.state.end_time} onChange={this.handleChange} type=\"time\" placeholder=\"Date of Event\" />\r\n                                        </Col>\r\n                                    </Form.Row>\r\n                                </Form>\r\n                                <Label>Dateline</Label>\r\n                                <Group >\r\n                                    <Control required name=\"dateline\" value={this.state.dateline} onChange={this.handleChange} type=\"date\" placeholder=\"Dateline\" />\r\n                                </Group>\r\n                                <Link to=\"/ListofEvent\">\r\n                                    <Button variant=\"dark\" block className=\" mt-4 btn-custom\" onClick={this.handleSubmit} >\r\n                                        Submit Event\r\n                                </Button>\r\n                                </Link>\r\n                            </Form>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            )\r\n        }\r\n        if (!currentUser) {\r\n            return (\r\n                <Login/>\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default withRouter(AddEvent);\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}