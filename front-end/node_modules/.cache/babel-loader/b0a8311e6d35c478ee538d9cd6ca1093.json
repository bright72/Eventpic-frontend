{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\phasi\\\\Documents\\\\GitHub\\\\Requesting-permission-to-use-photos-system-PDPA-\\\\front-end\\\\src\\\\MoreDetail.js\";\nimport React from 'react';\nimport { useParams, Link, Redirect } from 'react-router-dom';\nimport { Button, Container, Row, Col, Card } from 'react-bootstrap';\nimport firebase, { database } from './firebase/indexstore';\nimport Nevbar from './Nevbar.js';\nimport auth from './firebase/index';\nimport Login from './LoginForm.js';\n\nclass MoreDetail extends React.Component {\n  constructor(props) {\n    super();\n\n    this.removeItem = event_id => {\n      const itemsRef = firebase.database().ref('/events');\n      itemsRef.child(event_id).remove();\n      this.props.history.push('/ListofEvent');\n    };\n\n    this.state = {\n      event_id: props.match.params.id,\n      name: '',\n      detail: '',\n      start_date: '',\n      end_date: '',\n      start_time: '',\n      end_time: '',\n      dateline: '',\n      currentUser: null\n    };\n  }\n\n  componentDidMount() {\n    const itemsRef = firebase.database().ref(`events`);\n    itemsRef.child(this.state.event_id).on(\"value\", snapshot => {\n      let item = snapshot.val(); // console.log(this.state.event_id + \" : \" + item.name)\n\n      auth.onAuthStateChanged(user => {\n        if (user) {\n          this.setState({\n            currentUser: user\n          });\n        }\n      });\n\n      if (item) {\n        this.setState({\n          event_id: this.state.event_id,\n          name: item.name,\n          detail: item.detail,\n          start_date: item.start_date,\n          end_date: item.end_date,\n          start_time: item.start_time,\n          end_time: item.end_time,\n          dateline: item.dateline\n        });\n      }\n    });\n  }\n\n  render() {\n    const {\n      currentUser\n    } = this.state;\n\n    if (currentUser) {\n      return /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Nevbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Col, {\n        xs: 12,\n        sm: {\n          span: 1\n        },\n        md: {\n          span: 8,\n          offset: 1\n        },\n        lg: {\n          span: 10,\n          offset: 1\n        },\n        className: \"p-3 Loginbox mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Card.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Card.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 33\n        }\n      }, this.state.name, \" \"), /*#__PURE__*/React.createElement(Card.Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 33\n        }\n      }, this.state.detail), /*#__PURE__*/React.createElement(Card.Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 33\n        }\n      }, \" \\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E08\\u0E31\\u0E14\\u0E07\\u0E32\\u0E19 : \", this.state.start_date, \" - \", this.state.end_date, \" \"), /*#__PURE__*/React.createElement(Card.Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 33\n        }\n      }, \" \\u0E40\\u0E27\\u0E25\\u0E32 : \", this.state.start_time, \" - \", this.state.end_time, \" \"), /*#__PURE__*/React.createElement(Card.Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 33\n        }\n      }, \" \\u0E27\\u0E31\\u0E19\\u0E2A\\u0E34\\u0E49\\u0E19\\u0E2A\\u0E38\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1B\\u0E23\\u0E30\\u0E21\\u0E27\\u0E25\\u0E1C\\u0E25 : \", this.state.dateline), /*#__PURE__*/React.createElement(Link, {\n        to: \"/ShowPicture\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"dark m-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 37\n        }\n      }, \"Picture\")), /*#__PURE__*/React.createElement(Link, {\n        to: \"/UpPicture\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"dark m-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 37\n        }\n      }, \"Upload Picture\")), /*#__PURE__*/React.createElement(Link, {\n        to: \"/EditEvent/\" + this.state.event_id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"outline-dark m-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 37\n        }\n      }, \"Edit\")), /*#__PURE__*/React.createElement(Button, {\n        variant: \"outline-dark m-1\",\n        onClick: () => this.removeItem(this.state.event_id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 33\n        }\n      }, \"Delete\")))));\n    }\n\n    if (!currentUser) {\n      return /*#__PURE__*/React.createElement(Login, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }\n      });\n    }\n  }\n\n}\n\nexport default MoreDetail;","map":{"version":3,"sources":["C:/Users/phasi/Documents/GitHub/Requesting-permission-to-use-photos-system-PDPA-/front-end/src/MoreDetail.js"],"names":["React","useParams","Link","Redirect","Button","Container","Row","Col","Card","firebase","database","Nevbar","auth","Login","MoreDetail","Component","constructor","props","removeItem","event_id","itemsRef","ref","child","remove","history","push","state","match","params","id","name","detail","start_date","end_date","start_time","end_time","dateline","currentUser","componentDidMount","on","snapshot","item","val","onAuthStateChanged","user","setState","render","span","offset"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { useParams, Link, Redirect } from 'react-router-dom'\r\nimport { Button, Container, Row, Col, Card } from 'react-bootstrap'\r\nimport firebase, { database } from './firebase/indexstore'\r\nimport Nevbar from './Nevbar.js'\r\nimport auth from './firebase/index'\r\nimport Login from './LoginForm.js'\r\n\r\n\r\nclass MoreDetail extends React.Component {\r\n\r\n    constructor(props) {\r\n        super()\r\n        this.state = {\r\n            event_id: props.match.params.id,\r\n            name: '',\r\n            detail: '',\r\n            start_date: '',\r\n            end_date: '',\r\n            start_time: '',\r\n            end_time: '',\r\n            dateline: '',\r\n            currentUser: null\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        const itemsRef = firebase.database().ref(`events`)\r\n        itemsRef.child(this.state.event_id).on(\"value\", (snapshot) => {\r\n            let item = snapshot.val()\r\n            // console.log(this.state.event_id + \" : \" + item.name)\r\n            auth.onAuthStateChanged(user => {\r\n                if (user) {\r\n                    this.setState({\r\n                        currentUser: user\r\n                    })\r\n                }\r\n            })\r\n            if (item) {\r\n                this.setState({\r\n                    event_id: this.state.event_id,\r\n                    name: item.name,\r\n                    detail: item.detail,\r\n                    start_date: item.start_date,\r\n                    end_date: item.end_date,\r\n                    start_time: item.start_time,\r\n                    end_time: item.end_time,\r\n                    dateline: item.dateline\r\n                })\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    removeItem = event_id => {\r\n        const itemsRef = firebase.database().ref('/events')\r\n        itemsRef.child(event_id).remove()\r\n        this.props.history.push('/ListofEvent')\r\n    }\r\n\r\n    render() {\r\n        const { currentUser } = this.state\r\n        if (currentUser) {\r\n            return (\r\n                <Container fluid >\r\n                    <Nevbar />\r\n                    <Col\r\n                        xs={12}\r\n                        sm={{ span: 1 }}\r\n                        md={{ span: 8, offset: 1 }}\r\n                        lg={{ span: 10, offset: 1 }}\r\n                        className=\"p-3 Loginbox mt-3\"\r\n                    >\r\n                        <Card>\r\n                            <Card.Body>\r\n                                <Card.Title>{this.state.name} </Card.Title>\r\n                                <Card.Text>{this.state.detail}</Card.Text>\r\n                                <Card.Text> วันที่จัดงาน : {this.state.start_date} - {this.state.end_date} </Card.Text>\r\n                                <Card.Text> เวลา : {this.state.start_time} - {this.state.end_time} </Card.Text>\r\n                                <Card.Text> วันสิ้นสุดการประมวลผล : {this.state.dateline}</Card.Text>\r\n                                <Link to={\"/ShowPicture\"} >\r\n                                    <Button variant=\"dark m-1\">Picture</Button>\r\n                                </Link >\r\n                                <Link to={\"/UpPicture\"} >\r\n                                    <Button variant=\"dark m-1\">Upload Picture</Button>\r\n                                </Link >\r\n                                <Link to={\"/EditEvent/\" + this.state.event_id} >\r\n                                    <Button variant=\"outline-dark m-1\" >Edit</Button>\r\n                                </Link>\r\n                                <Button variant=\"outline-dark m-1\" onClick={() => this.removeItem(this.state.event_id)}>Delete</Button>\r\n                            </Card.Body>\r\n                        </Card>\r\n\r\n                    </Col>\r\n\r\n                </Container>\r\n\r\n\r\n            )\r\n        }\r\n        \r\n        if (!currentUser) {\r\n            return (\r\n                <Login />\r\n            )\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\nexport default MoreDetail\r\n"]},"metadata":{},"sourceType":"module"}