{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\phasi\\\\Documents\\\\GitHub\\\\Requesting-permission-to-use-photos-system-PDPA-\\\\front-end\\\\src\\\\EditEvent.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Form, Button, Container, Row, Col } from 'react-bootstrap';\nimport Nevbar from './Nevbar.js';\nimport './Style.css';\nimport firebase, { database } from './firebase/indexstore';\nimport auth from './firebase/index';\nimport Login from './LoginForm.js';\nconst {\n  Group,\n  Label,\n  Control\n} = Form;\n\nclass EditEvent extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const {\n        name,\n        start_date,\n        end_date,\n        start_time,\n        end_time,\n        detail,\n        event_id,\n        dateline\n      } = this.state;\n\n      if (name && start_date && end_date && start_time && end_time && detail == '') {\n        // return this.updateItem();\n        alert(\"กรุณากรอกรายละเอียดให้ครบถ้วน :)\");\n      } else if (event_id != '') {\n        if (start_date > end_date || start_date > dateline || end_date > dateline) {\n          alert(\"กรุณากรอกวันที่ให้ถูกต้อง\");\n        }\n\n        return this.updateItem();\n      } else if (start_date > end_date || start_date > dateline || end_date > dateline) {\n        alert(\"กรุณากรอกวันที่ให้ถูกต้อง\");\n      } else {\n        const itemsRef = firebase.database().ref('events');\n        const item = {\n          name,\n          detail,\n          start_date,\n          end_date,\n          start_time,\n          end_time,\n          dateline\n        };\n        itemsRef.push(item);\n        this.setState({\n          event_id: '',\n          name: '',\n          detail: '',\n          start_date: '',\n          end_date: '',\n          start_time: '',\n          end_time: '',\n          dateline: ''\n        });\n      }\n    };\n\n    this.handleUpdate = (event_id = null, name = null, start_date = null, end_date = null, start_time = null, end_time = null, detail = null, dateline = null) => {\n      this.setState({\n        event_id,\n        name,\n        start_date,\n        end_date,\n        start_time,\n        end_time,\n        detail,\n        dateline\n      });\n    };\n\n    this.updateItem = () => {\n      const {\n        name,\n        start_date,\n        end_date,\n        start_time,\n        end_time,\n        detail,\n        dateline\n      } = this.state;\n      const obj = {\n        name,\n        start_date,\n        end_date,\n        start_time,\n        end_time,\n        detail,\n        dateline\n      };\n      const itemsRef = firebase.database().ref('/events');\n      itemsRef.child(this.state.event_id).update(obj);\n      this.setState({\n        event_id: '',\n        name: '',\n        detail: '',\n        start_date: '',\n        end_date: '',\n        start_time: '',\n        end_time: '',\n        dateline: ''\n      });\n      this.props.history.push('/MoreDetail/' + this.state.event_id);\n    };\n\n    this.state = {\n      events: [],\n      event_id: '',\n      name: '',\n      detail: '',\n      start_date: '',\n      end_date: '',\n      start_time: '',\n      end_time: '',\n      dateline: '',\n      currentUser: null\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUpdate = this.handleUpdate.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const itemsRef = firebase.database().ref('/events');\n    itemsRef.child(this.props.match.params.id).on(\"value\", snapshot => {\n      let value = snapshot.val();\n      auth.onAuthStateChanged(user => {\n        if (user) {\n          this.setState({\n            currentUser: user\n          });\n        }\n      });\n      this.setState({\n        event_id: this.props.match.params.id,\n        name: value.name,\n        detail: value.detail,\n        start_date: value.start_date,\n        end_date: value.end_date,\n        start_time: value.start_time,\n        end_time: value.end_time,\n        dateline: value.dateline\n      });\n    });\n  }\n\n  render() {\n    const {\n      currentUser\n    } = this.state;\n\n    if (currentUser) {\n      return /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Nevbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        className: \" m-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xs: 12,\n        sm: {\n          span: 10\n        },\n        md: {\n          span: 4,\n          offset: 2\n        },\n        lg: {\n          span: 6,\n          offset: 3\n        },\n        className: \"p-5 Loginbox\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"text-center mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 29\n        }\n      }, \" Edit Event\"), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        className: \"mt-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 33\n        }\n      }, \"Name of Event\"), /*#__PURE__*/React.createElement(Group, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Control, {\n        name: \"name\",\n        value: this.state.name,\n        onChange: this.handleChange,\n        type: \"text\",\n        placeholder: \"Name of Event\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        controlId: \"exampleForm.ControlTextarea1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 37\n        }\n      }, \"Detail of event\"), /*#__PURE__*/React.createElement(Form.Control, {\n        name: \"detail\",\n        value: this.state.detail,\n        onChange: this.handleChange,\n        type: \"text\",\n        placeholder: \"Detail of event\",\n        as: \"textarea\",\n        rows: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 45\n        }\n      }, \"Start date of Event\"), /*#__PURE__*/React.createElement(Control, {\n        name: \"start_date\",\n        value: this.state.start_date,\n        onChange: this.handleChange,\n        type: \"date\",\n        placeholder: \"Date of Event\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 45\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 45\n        }\n      }, \"End date of Event\"), /*#__PURE__*/React.createElement(Control, {\n        name: \"end_date\",\n        value: this.state.end_date,\n        onChange: this.handleChange,\n        type: \"date\",\n        placeholder: \"Date of Event\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 45\n        }\n      })))), /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Form.Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 45\n        }\n      }, \"Start time of Event\"), /*#__PURE__*/React.createElement(Control, {\n        name: \"start_time\",\n        value: this.state.start_time,\n        onChange: this.handleChange,\n        type: \"time\",\n        placeholder: \"Date of Event\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 45\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 45\n        }\n      }, \"End time of Event\"), /*#__PURE__*/React.createElement(Control, {\n        name: \"end_time\",\n        value: this.state.end_time,\n        onChange: this.handleChange,\n        type: \"time\",\n        placeholder: \"Date of Event\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 45\n        }\n      })))), /*#__PURE__*/React.createElement(Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 33\n        }\n      }, \"Dateline\"), /*#__PURE__*/React.createElement(Group, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Control, {\n        name: \"dateline\",\n        value: this.state.dateline,\n        onChange: this.handleChange,\n        type: \"date\",\n        placeholder: \"Dateline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        variant: \"dark\",\n        block: true,\n        className: \" mt-4 btn-custom\",\n        onClick: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 33\n        }\n      }, \"Submit Edit Event\")))));\n    }\n\n    if (!currentUser) {\n      return /*#__PURE__*/React.createElement(Login, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 17\n        }\n      });\n    }\n  }\n\n}\n\nexport default withRouter(EditEvent);","map":{"version":3,"sources":["C:/Users/phasi/Documents/GitHub/Requesting-permission-to-use-photos-system-PDPA-/front-end/src/EditEvent.js"],"names":["React","Component","withRouter","Form","Button","Container","Row","Col","Nevbar","firebase","database","auth","Login","Group","Label","Control","EditEvent","constructor","handleChange","e","name","value","target","setState","handleSubmit","preventDefault","start_date","end_date","start_time","end_time","detail","event_id","dateline","state","alert","updateItem","itemsRef","ref","item","push","handleUpdate","obj","child","update","props","history","events","currentUser","bind","componentDidMount","match","params","id","on","snapshot","val","onAuthStateChanged","user","render","span","offset"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Form, Button, Container, Row, Col } from 'react-bootstrap'\r\nimport Nevbar from './Nevbar.js'\r\nimport './Style.css'\r\nimport firebase, { database } from './firebase/indexstore'\r\nimport auth from './firebase/index'\r\nimport Login from './LoginForm.js'\r\n\r\nconst { Group, Label, Control } = Form\r\n\r\nclass EditEvent extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            events: [],\r\n            event_id: '',\r\n            name: '',\r\n            detail: '',\r\n            start_date: '',\r\n            end_date: '',\r\n            start_time: '',\r\n            end_time: '',\r\n            dateline: '',\r\n            currentUser: null\r\n        }\r\n\r\n        this.handleChange = this.handleChange.bind(this)\r\n        this.handleUpdate = this.handleUpdate.bind(this)\r\n        this.handleSubmit = this.handleSubmit.bind(this)\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        const itemsRef = firebase.database().ref('/events')\r\n        itemsRef.child(this.props.match.params.id).on(\"value\", (snapshot) => {\r\n            let value = snapshot.val()\r\n            auth.onAuthStateChanged(user => {\r\n                if (user) {\r\n                    this.setState({\r\n                        currentUser: user\r\n                    })\r\n                }\r\n            })\r\n            this.setState({\r\n                event_id: this.props.match.params.id,\r\n                name: value.name,\r\n                detail: value.detail,\r\n                start_date: value.start_date,\r\n                end_date: value.end_date,\r\n                start_time: value.start_time,\r\n                end_time: value.end_time,\r\n                dateline: value.dateline\r\n            })\r\n        })\r\n\r\n    }\r\n\r\n    handleChange = e => {\r\n        const { name, value } = e.target\r\n        this.setState({\r\n            [name]: value\r\n        })\r\n    }\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        const { name, start_date, end_date, start_time, end_time, detail, event_id, dateline } = this.state\r\n        if (name && start_date && end_date && start_time && end_time && detail == '') {\r\n            // return this.updateItem();\r\n            alert(\"กรุณากรอกรายละเอียดให้ครบถ้วน :)\")\r\n        } else if (event_id != '') {\r\n            if (start_date > end_date || start_date > dateline || end_date > dateline) {\r\n                alert(\"กรุณากรอกวันที่ให้ถูกต้อง\")\r\n            }\r\n            return this.updateItem();\r\n        } else if (start_date > end_date || start_date > dateline || end_date > dateline) {\r\n            alert(\"กรุณากรอกวันที่ให้ถูกต้อง\")\r\n        } else {\r\n            const itemsRef = firebase.database().ref('events')\r\n            const item = {\r\n                name,\r\n                detail,\r\n                start_date,\r\n                end_date,\r\n                start_time,\r\n                end_time,\r\n                dateline\r\n            }\r\n            itemsRef.push(item)\r\n            this.setState({\r\n                event_id: '',\r\n                name: '',\r\n                detail: '',\r\n                start_date: '',\r\n                end_date: '',\r\n                start_time: '',\r\n                end_time: '',\r\n                dateline: ''\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    handleUpdate = (event_id = null, name = null, start_date = null, end_date = null, start_time = null, end_time = null, detail = null, dateline = null) => {\r\n        this.setState({ event_id, name, start_date, end_date, start_time, end_time, detail, dateline })\r\n    }\r\n\r\n    updateItem = () => {\r\n        const { name, start_date, end_date, start_time, end_time, detail, dateline } = this.state\r\n        const obj = {\r\n            name,\r\n            start_date,\r\n            end_date,\r\n            start_time,\r\n            end_time,\r\n            detail,\r\n            dateline\r\n        }\r\n\r\n        const itemsRef = firebase.database().ref('/events')\r\n\r\n        itemsRef.child(this.state.event_id).update(obj);\r\n\r\n        this.setState({\r\n            event_id: '',\r\n            name: '',\r\n            detail: '',\r\n            start_date: '',\r\n            end_date: '',\r\n            start_time: '',\r\n            end_time: '',\r\n            dateline: ''\r\n        })\r\n        this.props.history.push('/MoreDetail/' + this.state.event_id);\r\n    }\r\n\r\n\r\n    render() {\r\n        const { currentUser } = this.state\r\n        if (currentUser) {\r\n            return (\r\n                <Container fluid >\r\n                    <Nevbar />\r\n                    <Row className=\" m-4\">\r\n                        <Col\r\n                            xs={12}\r\n                            sm={{ span: 10 }}\r\n                            md={{ span: 4, offset: 2 }}\r\n                            lg={{ span: 6, offset: 3 }}\r\n                            className=\"p-5 Loginbox\"\r\n                        >\r\n                            <h1 className=\"text-center mt-2\"> Edit Event</h1>\r\n                            <Form onSubmit={this.handleSubmit} className=\"mt-4\">\r\n                                <Label>Name of Event</Label>\r\n                                <Group >\r\n                                    <Control name=\"name\" value={this.state.name} onChange={this.handleChange} type=\"text\" placeholder=\"Name of Event\" />\r\n                                </Group>\r\n                                <Form.Group controlId=\"exampleForm.ControlTextarea1\">\r\n                                    <Form.Label>Detail of event</Form.Label>\r\n                                    <Form.Control name=\"detail\" value={this.state.detail} onChange={this.handleChange} type=\"text\" placeholder=\"Detail of event\" as=\"textarea\" rows=\"3\" />\r\n                                </Form.Group>\r\n                                <Form>\r\n                                    <Form.Row>\r\n                                        <Col>\r\n                                            <Label>Start date of Event</Label>\r\n                                            <Control name=\"start_date\" value={this.state.start_date} onChange={this.handleChange} type=\"date\" placeholder=\"Date of Event\" />\r\n                                        </Col>\r\n                                        <Col>\r\n                                            <Label>End date of Event</Label>\r\n                                            <Control name=\"end_date\" value={this.state.end_date} onChange={this.handleChange} type=\"date\" placeholder=\"Date of Event\" />\r\n                                        </Col>\r\n                                    </Form.Row>\r\n                                </Form>\r\n                                <Form>\r\n                                    <Form.Row>\r\n                                        <Col>\r\n                                            <Label>Start time of Event</Label>\r\n                                            <Control name=\"start_time\" value={this.state.start_time} onChange={this.handleChange} type=\"time\" placeholder=\"Date of Event\" />\r\n                                        </Col>\r\n                                        <Col>\r\n                                            <Label>End time of Event</Label>\r\n                                            <Control name=\"end_time\" value={this.state.end_time} onChange={this.handleChange} type=\"time\" placeholder=\"Date of Event\" />\r\n                                        </Col>\r\n                                    </Form.Row>\r\n                                </Form>\r\n                                <Label>Dateline</Label>\r\n                                <Group >\r\n                                    <Control name=\"dateline\" value={this.state.dateline} onChange={this.handleChange} type=\"date\" placeholder=\"Dateline\" />\r\n                                </Group>\r\n\r\n                                <Button variant=\"dark\" block className=\" mt-4 btn-custom\" onClick={this.handleSubmit} >\r\n                                    Submit Edit Event\r\n                            </Button>\r\n\r\n                            </Form>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            )\r\n        }\r\n        if (!currentUser) {\r\n            return (\r\n                <Login />\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default withRouter(EditEvent);\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}